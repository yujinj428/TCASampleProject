!function(){var require,define,o,i,a,c,f=wmatrixVersion;o={},i=[],a={},c=".",require=function(e){if(!o[e])throw new Error("module "+e+" not found");var n,t,r;if(e in a)throw n=i.slice(a[e]).join("->")+"->"+e,new Error("Cycle in require graph: "+n);if(o[e].factory)try{return a[e]=i.length,i.push(e),t=o[e],r=t.factory,t.exports={},delete t.factory,r(function(e){var n=e;return"."===e.charAt(0)&&(n=t.id.slice(0,t.id.lastIndexOf(c))+c+e.slice(2)),require(n)},t.exports,t),t.exports}finally{delete a[e],i.pop()}return o[e].exports},(define=function(e,n){if(Object.prototype.hasOwnProperty.call(o,e))throw new Error("module "+e+" already defined");o[e]={id:e,factory:n}}).remove=function(e){delete o[e]},define.moduleMap=o,"object"==typeof module&&"function"==typeof require&&(module.exports.require=require,module.exports.define=define),define("wmatrix",function(require,e,n){if(window.wmatrix&&!(window.wmatrix instanceof HTMLElement))throw new Error("wmatrix already defined");var t=require("wmatrix/channel"),r=require("wmatrix/platform"),o=document.addEventListener,i=document.removeEventListener,a=window.addEventListener,c=window.removeEventListener,l={},u={};function s(e,n){var t=document.createEvent("Events");if(t.initEvent(e,!1,!1),n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}document.addEventListener=function(e,n,t){var r=e.toLowerCase();void 0!==l[r]?l[r].subscribe(n):o.call(document,e,n,t)},window.addEventListener=function(e,n,t){var r=e.toLowerCase();void 0!==u[r]?u[r].subscribe(n):a.call(window,e,n,t)},document.removeEventListener=function(e,n,t){var r=e.toLowerCase();void 0!==l[r]?l[r].unsubscribe(n):i.call(document,e,n,t)},window.removeEventListener=function(e,n,t){var r=e.toLowerCase();void 0!==u[r]?u[r].unsubscribe(n):c.call(window,e,n,t)};var wmatrix={define:define,require:require,version:f,platformVersion:f,platformId:r.id,addWindowEventHandler:function(e){return u[e]=t.create(e)},addStickyDocumentEventHandler:function(e){return l[e]=t.createSticky(e)},addDocumentEventHandler:function(e){return l[e]=t.create(e)},removeWindowEventHandler:function(e){delete u[e]},removeDocumentEventHandler:function(e){delete l[e]},getOriginalHandlers:function(){return{document:{addEventListener:o,removeEventListener:i},window:{addEventListener:a,removeEventListener:c}}},fireDocumentEvent:function(e,n,t){var r=s(e,n);void 0!==l[e]?t?l[e].fire(r):setTimeout(function(){"wmatrixready"===e&&document.dispatchEvent(r),l[e].fire(r)},0):document.dispatchEvent(r)},fireWindowEvent:function(e,n){var t=s(e,n);void 0!==u[e]?setTimeout(function(){u[e].fire(t)},0):window.dispatchEvent(t)},callbackId:window.crypto.getRandomValues(new Uint32Array(1))[0],callbacks:{},callbackStatus:{NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9},callbackSuccess:function(e,n){wmatrix.callbackFromNative(e,!0,n.status,[n.message],n.keepCallback)},callbackError:function(e,n){wmatrix.callbackFromNative(e,!1,n.status,[n.message],n.keepCallback)},callbackFromNative:function(n,t,e,r,o){try{var i=wmatrix.callbacks[n];i&&(i.callbackFunc&&i.callbackFunc.apply(null,r),o||delete wmatrix.callbacks[n])}catch(e){i="Error in "+(t?"Success":"Error")+" callbackId: "+n+" : "+e;throw console&&console.log&&console.log(i),console&&console.log&&e.stack&&console.log(e.stack),wmatrix.fireWindowEvent("wmatrixcallbackerror",{message:i}),e}},addConstructor:function(e){t.onJSReady.subscribe(function(){try{e()}catch(e){console.log("Failed to run constructor: "+e)}})}};n.exports=wmatrix}),define("wmatrix/argscheck",function(require,e,n){var f=require("wmatrix/utils"),d=n.exports,p={A:"Array",D:"Date",N:"Number",S:"String",F:"Function",O:"Object"};d.checkArgs=function(e,n,t,r){if(d.enableChecks){for(var o,i,a=null,c=0;c<e.length;++c){var l=e.charAt(c),u=l.toUpperCase(),s=t[c];if("*"!==l&&(o=f.typeName(s),(null!=s||l!==u)&&o!==p[u])){a="Expected "+p[u];break}}if(a)throw a+=", but got "+o+".",a='Wrong type for parameter "'+(r=r||t.callee,i=c,/\(\s*([^)]*?)\s*\)/.exec(r)[1].split(/\s*,\s*/)[i])+'" of '+n+": "+a,"undefined"==typeof jasmine&&console.error(a),TypeError(a)}},d.getValue=function(e,n){return void 0===e?n:e},d.enableChecks=!0}),define("wmatrix/base64",function(require,e,n){e.fromArrayBuffer=function(e){for(var n,t=new Uint8Array(e),r=t.byteLength,o="",i=l(),a=0;a<r-2;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o=(o+=i[n>>12])+i[4095&n];return r-a==2?(n=(t[a]<<16)+(t[a+1]<<8),o=(o+=i[n>>12])+c[(4095&n)>>6]+"="):r-a==1&&(n=t[a]<<16,o=o+i[n>>12]+"=="),o},e.toArrayBuffer=function(e){for(var n=atob(e),e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0,o=n.length;r<o;r++)t[r]=n.charCodeAt(r);return e};var t,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(){t=[];for(var e=0;e<64;e++)for(var n=0;n<64;n++)t[64*e+n]=c[e]+c[n];return l=function(){return t},t}}),define("wmatrix/builder",function(require,e,n){var l=require("wmatrix/utils");function o(e,n,t){var r=!1;try{e[n]=t}catch(e){r=!0}!r&&e[n]===t||l.defineGetter(e,n,function(){return t})}function u(e,n,t,r){r?l.defineGetter(e,n,function(){return console.log(r),delete e[n],o(e,n,t),t}):o(e,n,t)}function s(r,e,o,i){var n,t=e,a=function(e,n){try{var t=e.path?require(e.path):{};o?(void 0===r[n]?u(r,n,t,e.deprecated):void 0!==e.path&&(i?f(r[n],t):u(r,n,t,e.deprecated)),t=r[n]):void 0===r[n]?u(r,n,t,e.deprecated):t=r[n],e.children&&s(t,e.children,o,i)}catch(e){l.alert("Exception building WMatrix JS globals: "+e+' for key "'+n+'"')}},c=void 0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.apply(c,[t[n],n])}function f(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e.prototype&&e.prototype.constructor===e?o(e.prototype,t,n[t]):"object"==typeof n[t]&&"object"==typeof e[t]?f(e[t],n[t]):o(e,t,n[t]))}e.buildIntoButDoNotClobber=function(e,n){s(n,e,!1,!1)},e.buildIntoAndClobber=function(e,n){s(n,e,!0,!1)},e.buildIntoAndMerge=function(e,n){s(n,e,!0,!0)},e.recursiveMerge=f,e.assignOrWrapInDeprecateGetter=u}),define("wmatrix/channel",function(require,e,n){function t(e,n){this.type=e,this.handlers={},this.state=n?1:0,this.fireArgs=null,this.numHandlers=0,this.onHasSubscribersChange=null}var o=require("wmatrix/utils"),i=1,r={join:function(e,n){function t(){--o||e()}for(var r=n.length,o=r,i=0;i<r;i++){if(0===n[i].state)throw Error("Can only use join with sticky channels.");n[i].subscribe(t)}r||e()},create:function(e){return r[e]=new t(e,!1)},createSticky:function(e){return r[e]=new t(e,!0)},wmatrixReadyChannelsArray:[],wmatrixReadyChannelsMap:{},waitForInitialization:function(e){var n;e&&(n=r[e]||this.createSticky(e),this.wmatrixReadyChannelsMap[e]=n,this.wmatrixReadyChannelsArray.push(n))},initializationComplete:function(e){e=this.wmatrixReadyChannelsMap[e];e&&e.fire()}};function a(e){if("function"!=typeof e&&"function"!=typeof e.handleEvent)throw new Error("Must provide a function or an EventListener object implementing the handleEvent interface.")}t.prototype.subscribe=function(e,n){var t,r;a(e),e&&"object"==typeof e?(t=e.handleEvent,n=e):t=e,2===this.state?t.apply(n||this,this.fireArgs):(r=e.observer_guid,"object"==typeof n&&(t=o.close(n,t)),r=r||""+i++,t.observer_guid=r,e.observer_guid=r,this.handlers[r]||(this.handlers[r]=t,this.numHandlers++,1===this.numHandlers&&this.onHasSubscribersChange&&this.onHasSubscribersChange()))},t.prototype.unsubscribe=function(e){a(e),e=(e&&"object"==typeof e?e.handleEvent:e).observer_guid,this.handlers[e]&&(delete this.handlers[e],this.numHandlers--,0===this.numHandlers)&&this.onHasSubscribersChange&&this.onHasSubscribersChange()},t.prototype.fire=function(e){var n=Array.prototype.slice.call(arguments);if(1===this.state&&(this.state=2,this.fireArgs=n),this.numHandlers){var t,r=[];for(t in this.handlers)r.push(this.handlers[t]);for(var o=0;o<r.length;++o)r[o].apply(this,n);2===this.state&&this.numHandlers&&(this.numHandlers=0,this.handlers={},this.onHasSubscribersChange)&&this.onHasSubscribersChange()}},r.createSticky("onDOMContentLoaded"),r.createSticky("onNativeReady"),r.createSticky("onJSReady"),r.createSticky("onPluginsReady"),r.createSticky("onWMatrixReady"),r.create("onResume"),r.create("onPause"),r.waitForInitialization("onJSReady"),r.waitForInitialization("onDOMContentLoaded"),n.exports=r}),void 0===window.webkit?(define("wmatrix/android/nativeapiprovider",function(require,e,n){var t=this._wmatrixNative,r=t;n.exports={get:function(){return r},setPreferPrompt:function(){r=t},set:function(e){r=e}}}),define("wmatrix/exec",function(require,e,n){var c,wmatrix=require("wmatrix"),l=require("wmatrix/android/nativeapiprovider"),u=require("wmatrix/utils"),s=require("wmatrix/base64"),t=require("wmatrix/channel"),f={JS_OBJECT:1},r={POLLING:0,LOAD_URL:1,ONLINE_EVENT:2,EVAL_BRIDGE:3},o=r.EVAL_BRIDGE,i=!1,d=-1,p=[],a=!1,m="undefined"==typeof Promise?null:Promise.resolve(),v=m?function(e){m.then(e)}:function(e){setTimeout(e)};function w(e,n,t,r){if(d<0)throw new Error("exec() called without bridgeSecret");void 0===c&&w.setJsToNativeBridgeMode(f.JS_OBJECT),r=r||[];for(var o=0;o<r.length;o++)"ArrayBuffer"==u.typeName(r[o])&&(r[o]=s.fromArrayBuffer(r[o]));var i=n+wmatrix.callbackId++,a=JSON.stringify(r),i=(e&&(wmatrix.callbacks[i]={callbackFunc:e}),l.get().exec(d,n,t,i,a));c==f.JS_OBJECT&&"Null arguments."===i?(w.setJsToNativeBridgeMode(f.PROMPT),w(e,n,t,r),w.setJsToNativeBridgeMode(f.JS_OBJECT)):i&&(p.push(i),v(E))}function g(){h(!0)}function h(e){d<0||(e=l.get().retrieveJsMessages(d,!!e))&&(p.push(e),E())}function y(){i&&(h(),setTimeout(y,50))}function b(e){wmatrix.fireWindowEvent(e.type)}function x(e){var n,t,r,o,i,a=e.charAt(0);"S"==a||"F"==a?(a="S"==a,n="1"==e.charAt(1),o=e.indexOf(" ",2),t=+e.slice(2,o),r=e.indexOf(" ",o+1),o=e.slice(o+1,r),function e(n,t){var r=t.charAt(0);if("s"==r)n.push(t.slice(1));else if("t"==r)n.push(!0);else if("f"==r)n.push(!1);else if("N"==r)n.push(null);else if("n"==r)n.push(+t.slice(1));else if("A"==r){var o=t.slice(1);n.push(s.toArrayBuffer(o))}else if("S"==r)n.push(window.atob(t.slice(1)));else if("M"==r)for(var i=t.slice(1);""!==i;){var a=i.indexOf(" "),c=+i.slice(0,a),l=i.substr(a+1,c),i=i.slice(a+c+1);e(n,l)}else n.push(JSON.parse(t))}(i=[],e.slice(r+1)),wmatrix.callbackFromNative(o,a,t,i,n)):console.log("processMessage failed: invalid message: "+JSON.stringify(e))}function E(){if(!a&&0!==p.length){a=!0;try{var e=function(){var e=p.shift();if("*"==e)return"*";var n=e.indexOf(" "),t=+e.slice(0,n),r=e.substr(n+1,t);(e=e.slice(n+t+1))&&p.unshift(e);return r}();"*"==e&&0===p.length?v(h):x(e)}finally{a=!1,0<p.length&&v(E)}}}w.init=function(){d=+prompt("","gap_init:"+o),t.onNativeReady.fire()},window.addEventListener("online",g,!1),window.addEventListener("offline",g,!1),wmatrix.addWindowEventHandler("online"),wmatrix.addWindowEventHandler("offline"),document.addEventListener("online",b,!1),document.addEventListener("offline",b,!1),w.jsToNativeModes=f,w.nativeToJsModes=r,w.setJsToNativeBridgeMode=function(e){l.setPreferPrompt(),c=e},w.setNativeToJsBridgeMode=function(e){e!=o&&(o==r.POLLING&&(i=!1),o=e,0<=d&&l.get().setNativeToJsBridgeMode(d,e),e==r.POLLING)&&(i=!0,setTimeout(y,1))},n.exports=w}),define("wmatrix/platform",function(require,e,n){var a=null;function c(e){var wmatrix=require("wmatrix"),n=e.action;switch(n){case"backbutton":case"menubutton":case"searchbutton":case"pause":case"volumedownbutton":case"volumeupbutton":wmatrix.fireDocumentEvent(n);break;case"resume":if(1<arguments.length&&e.pendingResult){if(2===arguments.length)e.pendingResult.result=arguments[1];else{for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);e.pendingResult.result=t}a=e}wmatrix.fireDocumentEvent(n,e);break;default:throw new Error("Unknown event action "+n)}}n.exports={id:"android",bootstrap:function(){var e=require("wmatrix/channel"),wmatrix=require("wmatrix"),n=require("wmatrix/exec"),t=require("wmatrix/modulemapper"),r=(n.init(),t.clobbers("wmatrix/plugin/android/app","navigator.app"),6<=Number(wmatrix.platformVersion.split(".")[2])?"CoreAndroid":"App");function o(e){wmatrix.addDocumentEventHandler(e+"button").onHasSubscribersChange=function(){n(null,r,"overrideButton",[e,1==this.numHandlers])}}wmatrix.addDocumentEventHandler("backbutton").onHasSubscribersChange=function(){n(null,r,"overrideBackbutton",[1==this.numHandlers])},wmatrix.addDocumentEventHandler("menubutton"),wmatrix.addDocumentEventHandler("searchbutton"),o("volumeup"),o("volumedown");var i=document.addEventListener;document.addEventListener=function(e,n,t){i(e,n,t),"resume"===e&&a&&n(a)},e.onJSReady.subscribe(function(){n(c,r,"messageChannel",[]),n(null,r,"show",[])})}}}),define("wmatrix/plugin/android/app",function(require,e,n){var t=require("wmatrix/exec"),r=6<=Number(require("wmatrix").platformVersion.split(".")[2])?"CoreAndroid":"App";n.exports={clearCache:function(){t(null,r,"clearCache",[])},loadUrl:function(e,n){t(null,r,"loadUrl",[e,n])},cancelLoadUrl:function(){t(null,r,"cancelLoadUrl",[])},clearHistory:function(){t(null,r,"clearHistory",[])},backHistory:function(){t(null,r,"backHistory",[])},overrideBackbutton:function(e){t(null,r,"overrideBackbutton",[e])},overrideButton:function(e,n){t(null,r,"overrideButton",[e,n])},exitApp:function(){return t(null,r,"exitApp",[])}}})):(define("wmatrix/exec",function(require,e,n){var wmatrix=require("wmatrix"),a=require("wmatrix/utils"),c=require("wmatrix/base64");function i(e){return"ArrayBuffer"===e.WHType&&(e=function(e){for(var n=atob(e),t=new Uint8Array(n.length),r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t.buffer}(e.data)),e}var t=function(){var e,n,t,r=null;if("string"==typeof arguments[0])throw new Error("The old format of this exec call has been removed (deprecated since 2.1). Change to: wmatrix.exec(null, null, 'Service', 'action', [ arg1, arg2 ]);");callbackFunc=arguments[0],e=arguments[1],n=arguments[2],r="INVALID",o=(o=arguments[3])||[],callbackFunc&&(r=e+wmatrix.callbackId++,wmatrix.callbacks[r]={callbackFunc:callbackFunc});var o=(i=o)&&"Array"===a.typeName(i)?(t=[],i.forEach(function(e,n){"ArrayBuffer"===a.typeName(e)?t.push({WHType:"ArrayBuffer",data:c.fromArrayBuffer(e)}):t.push(e)}),t):i,i=[r,e,n,JSON.parse(JSON.stringify(o))];window.webkit.messageHandlers.wmatrix.postMessage(i)};function r(){var e=require("wmatrix/exec");return"function"==typeof e.nativeFetchMessages&&"function"==typeof e.nativeEvalAndFetch&&"function"==typeof e.nativeCallback&&o!==e?e:t}function o(){r().apply(null,arguments)}t.nativeCallback=function(e,n,t){r=[],(n=n)&&Object.prototype.hasOwnProperty.call(n,"WHType")?"MultiPart"===n.WHType?n.messages.forEach(function(e){r.push(i(e))}):r.push(i(n)):r.push(n);var r,o=r;Promise.resolve().then(function(){wmatrix.callbackFromNative(e,!0,"",o,t)})},t.nativeEvalAndFetch=function(e){try{e()}catch(e){console.log(e)}},o.nativeFetchMessages=function(){return r().nativeFetchMessages.apply(null,arguments)},o.nativeEvalAndFetch=function(){return r().nativeEvalAndFetch.apply(null,arguments)},o.nativeCallback=function(){return r().nativeCallback.apply(null,arguments)},n.exports=o}),define("wmatrix/platform",function(require,e,n){n.exports={id:"ios",bootstrap:function(){require("wmatrix/modulemapper").clobbers("wmatrix/plugin/ios/console","window.console"),require("wmatrix/channel").onNativeReady.fire()}}}),define("wmatrix/plugin/ios/console",function(require,e,n){var t,r=require("wmatrix/plugin/ios/logger"),o=n.exports,i=window.console,a=!0,c={};function l(){}for(t in o.useLogger=function(e){if((a=arguments.length?!!e:a)&&r.useConsole())throw new Error("console and logger are too intertwingly");return a},o.log=function(){r.useConsole()||r.log.apply(r,[].slice.call(arguments))},o.error=function(){r.useConsole()||r.error.apply(r,[].slice.call(arguments))},o.warn=function(){r.useConsole()||r.warn.apply(r,[].slice.call(arguments))},o.info=function(){r.useConsole()||r.info.apply(r,[].slice.call(arguments))},o.debug=function(){r.useConsole()||r.debug.apply(r,[].slice.call(arguments))},o.assert=function(e){var n;e||(n=r.format.apply(r.format,[].slice.call(arguments,1)),o.log("ASSERT: "+n))},o.clear=function(){},o.dir=function(e){o.log("%o",e)},o.dirxml=function(e){o.log(e.innerHTML)},o.trace=l,o.group=o.log,o.groupCollapsed=o.log,o.groupEnd=l,o.time=function(e){c[e]=(new Date).valueOf()},o.timeEnd=function(e){var n=c[e];n?(n=(new Date).valueOf()-n,o.log(e+": "+n+"ms")):o.warn("unknown timer: "+e)},o.timeStamp=l,o.profile=l,o.profileEnd=l,o.count=l,o.exception=o.log,o.table=function(e,n){o.log("%o",e)},o)"function"==typeof i[t]&&(o[t]=function(n,t){return function(){var e=[].slice.call(arguments);e.unshift("[WEB]");try{n.apply(i,e)}catch(e){}try{t.apply(o,e)}catch(e){}}}(i[t],o[t]))}),define("wmatrix/plugin/ios/logger",function(require,e,n){for(var o,i=e,a=require("wmatrix/exec"),c=!1,l=!0,u=[],s=!1,f=console,t=["LOG","ERROR","WARN","INFO","DEBUG"],d={},r=0;r<t.length;r++){var p=t[r];d[p]=r,i[p]=p}function m(e,n){n=[e].concat([].slice.call(n)),i.logLevel.apply(i,n)}o=d.WARN,i.level=function(e){if(arguments.length){if(null===d[e])throw new Error("invalid logging level: "+e);o=d[e]}return t[o]},i.useConsole=function(e){if(c=arguments.length?!!e:c){if("undefined"==typeof console)throw new Error("global console object is not defined");if("function"!=typeof console.log)throw new Error("global console object does not have a log function");if("function"==typeof console.useLogger&&console.useLogger())throw new Error("console and logger are too intertwingly")}return c},i.useLogger=function(e){return l=arguments.length?!!e:l},i.log=function(e){m("LOG",arguments)},i.error=function(e){m("ERROR",arguments)},i.warn=function(e){m("WARN",arguments)},i.info=function(e){m("INFO",arguments)},i.debug=function(e){m("DEBUG",arguments)},i.logLevel=function(e){var n=[].slice.call(arguments,1),t="string"==typeof n[0]?"":"%o",r=(0<t.length&&n.unshift(t),i.format.apply(i.format,n));if(null===d[e])throw new Error("invalid logging level: "+e);if(!(o<d[e]))if(s||c){if(l&&a(null,"Console","logLevel",[e,r]),c){if(console.useLogger())throw new Error("console and logger are too intertwingly");switch(e){case i.LOG:f.log(r);break;case i.ERROR:f.log("ERROR: "+r);break;case i.WARN:f.log("WARN: "+r);break;case i.INFO:f.log("INFO: "+r);break;case i.DEBUG:f.log("DEBUG: "+r)}}}else u.push([e,r])},i.format=function(e,n){return function(e,n){if(null==e)return[""];if(1===arguments.length)return[e.toString()];"string"!=typeof e&&(e=e.toString());var t=/(.*?)%(.)(.*)/,r=e,o=[];for(;n.length;){var i=t.exec(r);if(!i)break;var a=n.shift();r=i[3],o.push(i[1]),"%"===i[2]?(o.push("%"),n.unshift(a)):o.push(function(e,n){try{switch(n){case"j":case"o":return JSON.stringify(e);case"c":return""}}catch(e){return"error JSON.stringify()ing argument: "+e}return null!=e?e.toString():Object.prototype.toString.call(e)}(a,i[2]))}o.push(r);var c=[].slice.call(n);return c.unshift(o.join("")),c}(e,[].slice.call(arguments,1)).join(" ")},i.__onWMatrixReady=function(){if(!s){s=!0;for(var e=0;e<u.length;e++){var n=u[e];i.logLevel(n[0],n[1])}u=null}},document.addEventListener("wmatrixready",i.__onWMatrixReady,!1)})),define("wmatrix/exec/proxy",function(require,e,n){var t={};n.exports={add:function(e,n){return console.log("adding proxy for "+e),t[e]=n},remove:function(e){var n=t[e];return delete t[e],t[e]=null,n},get:function(e,n){return t[e]?t[e][n]:null}}}),define("wmatrix/init",function(require,e,n){var t=require("wmatrix/channel"),wmatrix=require("wmatrix"),r=require("wmatrix/modulemapper"),o=require("wmatrix/platform"),i=require("wmatrix/pluginloader"),a=require("wmatrix/utils"),c=[t.onNativeReady,t.onPluginsReady];function l(e){for(var n=0;n<e.length;++n)2!==e[n].state&&console.log("Channel not fired: "+e[n].type)}window.setTimeout(function(){2!==t.onWMatrixReady.state&&(console.log("wmatrixready has not fired after 5 seconds."),l(c),l(t.wmatrixReadyChannelsArray))},5e3),window.navigator&&(window.navigator=function(n){function e(){}e.prototype=n;var t=new e;if(e.bind)for(var r in n)"function"==typeof n[r]?t[r]=n[r].bind(n):function(e){a.defineGetterSetter(t,r,function(){return n[e]})}(r);return t}(window.navigator)),window.console||(window.console={log:function(){}}),window.console.warn||(window.console.warn=function(e){this.log("warn: "+e)}),t.onPause=wmatrix.addDocumentEventHandler("pause"),t.onResume=wmatrix.addDocumentEventHandler("resume"),t.onActivated=wmatrix.addDocumentEventHandler("activated"),t.onWMatrixReady=wmatrix.addStickyDocumentEventHandler("wmatrixready"),"complete"===document.readyState||"interactive"===document.readyState?t.onDOMContentLoaded.fire():document.addEventListener("DOMContentLoaded",function(){t.onDOMContentLoaded.fire()},!1),window._nativeReady&&t.onNativeReady.fire(),r.clobbers("wmatrix","wmatrix"),r.clobbers("wmatrix/exec","wmatrix.exec"),o.bootstrap&&o.bootstrap(),setTimeout(function(){i.load(function(){t.onPluginsReady.fire()})},0),t.join(function(){r.mapModules(window),o.initialize&&o.initialize(),t.onJSReady.fire(),t.join(function(){require("wmatrix").fireDocumentEvent("wmatrixready")},t.wmatrixReadyChannelsArray)},c)}),define("wmatrix/modulemapper",function(require,e,n){var f,d,p=require("wmatrix/builder"),o=define.moduleMap;function r(e,n,t,r){if(!(n in o))throw new Error("Module "+n+" does not exist.");f.push(e,n,t),r&&(d[t]=r)}e.reset=function(){f=[],d={}},e.clobbers=function(e,n,t){r("c",e,n,t)},e.merges=function(e,n,t){r("m",e,n,t)},e.defaults=function(e,n,t){r("d",e,n,t)},e.runs=function(e){r("r",e,null)},e.mapModules=function(e){var n={};e.WMatrix_origSymbols=n;for(var t=0,r=f.length;t<r;t+=3){var o,i,a,c,l,u=f[t],s=f[t+1],s=require(s);"r"!==u&&(i=(o=f[t+2]).lastIndexOf("."),c=o.substr(0,i),i=o.substr(i+1),a=o in d?"Access made to deprecated symbol: "+o+". "+a:null,l=e,l=(c=(c=c)?c.split(".").reduce(function(e,n){return e[n]=e[n]||{}},l):l)[i],"m"===u&&l?p.recursiveMerge(l,s):("d"!==u||l)&&"d"===u||(o in n||(n[o]=l),p.assignOrWrapInDeprecateGetter(c,i,s,a)))}},e.getOriginalSymbol=function(e,n){var t=e.WMatrix_origSymbols;if(t&&n in t)return t[n];for(var r=n.split("."),o=e,i=0;i<r.length;++i)o=o&&o[r[i]];return o},e.reset()}),define("wmatrix/pluginloader",function(require,o,e){var u=require("wmatrix/modulemapper");function r(e,n,t,r){r=r||t,e in define.moduleMap?t():o.injectScript(n,function(){(e in define.moduleMap?t:r)()},r)}function i(e,a,c){var l=a.length;if(l)for(var n=0;n<a.length;n++)r(a[n].id,e+a[n].file,t);else c();function t(){if(!--l){for(var e,n=a,t=c,r=0;e=n[r];r++){if(e.clobbers&&e.clobbers.length)for(var o=0;o<e.clobbers.length;o++)u.clobbers(e.id,e.clobbers[o]);if(e.merges&&e.merges.length)for(var i=0;i<e.merges.length;i++)u.merges(e.id,e.merges[i]);e.runs&&u.runs(e.id)}t()}}}o.injectScript=function(e,n,t){var r=document.createElement("script");r.onload=n,r.onerror=t,r.src=e,document.head.appendChild(r)},o.load=function(n){var t=function(){for(var e=null,n=document.getElementsByTagName("script"),t="/wmatrix.js",r=n.length-1;-1<r;r--){var o=n[r].src.replace(/\?.*$/,"");if(o.indexOf(t)===o.length-t.length){e=o.substring(0,o.length-t.length)+"/";break}}return e}();null===t&&(console.log("Could not find wmatrix.js script tag. Plugin loading may fail."),t=""),r("wmatrix/plugin_list",t+"wmatrix_plugins.js",function(){var e=require("wmatrix/plugin_list");i(t,e,n)},n)}}),define("wmatrix/urlutil",function(require,e,n){e.makeAbsolute=function(e){var n=document.createElement("a");return n.href=e,n.href}}),define("wmatrix/utils",function(require,e,n){var r=e;function t(e){for(var n="",t=0;t<e;t++){var r=parseInt(window.crypto.getRandomValues(new Uint8Array(1))[0],10).toString(16);n+=r=1===r.length?"0"+r:r}return n}function o(){}r.defineGetterSetter=function(e,n,t,r){var o;Object.defineProperty?(o={get:t,configurable:!0},r&&(o.set=r),Object.defineProperty(e,n,o)):(e.__defineGetter__(n,t),r&&e.__defineSetter__(n,r))},r.defineGetter=r.defineGetterSetter,r.arrayIndexOf=function(e,n){if(e.indexOf)return e.indexOf(n);for(var t=e.length,r=0;r<t;++r)if(e[r]===n)return r;return-1},r.arrayRemove=function(e,n){n=r.arrayIndexOf(e,n);return-1!==n&&e.splice(n,1),-1!==n},r.typeName=function(e){return Object.prototype.toString.call(e).slice(8,-1)},r.isArray=Array.isArray||function(e){return"Array"===r.typeName(e)},r.isDate=function(e){return e instanceof Date},r.clone=function(e){if(!e||"function"==typeof e||r.isDate(e)||"object"!=typeof e)return e;var n,t;if(r.isArray(e))for(n=[],t=0;t<e.length;++t)n.push(r.clone(e[t]));else for(t in n={},e)t in n&&n[t]===e[t]||void 0===e[t]||"unknown"==typeof e[t]||(n[t]=r.clone(e[t]));return n},r.close=function(e,n,t){return function(){return n.apply(e,t||arguments)}},r.createUUID=function(){return t(4)+"-"+t(2)+"-"+t(2)+"-"+t(2)+"-"+t(6)},r.extend=function(e,n){o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e.prototype.constructor=e},r.alert=function(e){window.alert?window.alert(e):console&&console.log&&console.log(e)}}),window.wmatrix=require("wmatrix"),require("wmatrix/init")}();
//# sourceMappingURL=wmatrix.core.map